<div class="main-login">
    <div class="card">
        <div class="txt-center">
            <img src="assets/logo_red.svg" height="80" />
        </div>
        <form [formGroup]="form" (submit)="login()">
            <div class="form-group" [ngClass]="{'has-error': c['email'].errors && this.form.touched}">
                <label class="form-label">Correo</label>
                <input class="form-control w100" type="email" formControlName="email" />
                <div class="form-error">
                    @if (c['email'].touched && c['email'].errors) {
                    @if (c['email'].errors['required']) {
                    <span>Requerido</span>
                    }
                    @if (c['email'].errors['email']) {
                    <span>Correo no valido</span>
                    }
                    }
                </div>
            </div>
            <div class="form-group" [ngClass]="{'has-error': c['password'].errors && this.form.touched}">
                <label class="form-label">Contraseña</label>
                <div class="form-control-icon">
                    <input [type]="passwordVisible ? 'text': 'password'" formControlName="password" />
                    <i class='bx' [ngClass]="{'bx-moon': passwordVisible, 'bx-sun': !passwordVisible}"
                        (click)="togglePassword()"></i>
                </div>
                <div class="form-error">
                    @if (c['password'].touched && c['password'].errors) {
                    @if (c['password'].errors['required']) {
                    <span>Requerido</span>
                    }
                    }
                </div>
            </div>
            <div class="txt-right">
                <a class="link" href="#" (click)="forgotPassword()" style="font-size: 0.8em;">¿Olvido su contraseña?</a>
            </div>
            <button class="block primary mt-3" type="submit">Iniciar Sesión</button>
        </form>
    </div>
</div>
<app-modal [visible]="passwordRecoveryVisible">
    <ng-template #encabezado>
        <h4>Recuperar contraseña</h4>
    </ng-template>
    <ng-template #cuerpo>
        <small class="mb-3">Ingresa el correo electrónico con el que te encuentras
            registrado para recuperarla. </small>
        <form class="mt-3" [formGroup]="formRecovery">
            <div class="form-group" [ngClass]="{'has-error': c['email'].errors && this.form.touched}">
                <label class="form-label">Correo</label>
                <input class="form-control w100" type="email" formControlName="email" />
                <div class="form-error">
                    @if (c['email'].touched && c['email'].errors) {
                    @if (c['email'].errors['required']) {
                    <span>Requerido</span>
                    }
                    @if (c['email'].errors['email']) {
                    <span>Correo no valido</span>
                    }
                    }
                </div>
            </div>
        </form>
    </ng-template>
    <ng-template #pie>
        <button type="button" (click)="hideRecovery()">Cerrar</button>
        <button class="btn primary ml-3" type="button">Recuperar</button>
    </ng-template>
</app-modal>